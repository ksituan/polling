/**
 * Layout component that queries for data
 * with Gatsby's useStaticQuery component
 *
 * See: https://www.gatsbyjs.com/docs/use-static-query/
 */

import * as React from "react"
import PropTypes from "prop-types"
import { useStaticQuery, graphql } from "gatsby"

import Header from "./header"
import "../css/style.css"

const Layout = ({ children }) => {
  const data = useStaticQuery(graphql`
    query SiteTitleQuery {
      site {
        siteMetadata {
          title
        }
      }
    }
  `)

  React.useEffect(() => {
    window.addEventListener("scroll", () => {
      // Dealing with Safari difference.
      // look into scrollingElement https://caniuse.com/#feat=document-scrollingelement
      let scrollTop = document.body.scrollTop ? document.body.scrollTop : document.documentElement.scrollTop; 
      let newPos = scrollTop + "px";
      document.documentElement.style.setProperty('--scrollPos', newPos);
    });
  }, []);

  return (
    <>
      <Header siteTitle={data.site.siteMetadata?.title || `Title`} />
      <div>
        <main>{children}</main>
        <footer>
          <p>ðŸ„¯ {new Date().getFullYear()} {"//"} site by <a href="https://awmcphee.ca" target="_blank" rel="noreferrer">Prairie Heart Workshop</a></p>
          <div className="socialBox">
            <a href="https://twitter.com/CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="m 86.685417,29.60037 c 0.06094,0.881577 0.06094,1.763153 0.06094,2.652854 0,27.109486 -20.637822,58.374975 -58.374974,58.374975 v -0.01625 C 17.223707,90.628199 6.307599,87.435024 -3.076923,81.414305 -1.4559602,81.609308 0.1731278,81.70681 1.8062783,81.710872 11.044548,81.718972 20.01875,78.619261 27.286676,72.91136 18.507477,72.744794 10.808919,67.020643 8.119502,58.663949 c 3.07536,0.593135 6.24416,0.471258 9.262645,-0.353443 C 7.810747,56.376726 0.924702,47.96722 0.924702,38.200817 v -0.260004 c 2.8519196,1.588462 6.045094,2.470039 9.311396,2.56754 C 1.2212692,34.483572 -1.5575243,22.490884 3.8863108,13.114488 14.302724,25.931876 29.671401,33.723872 46.169471,34.548573 c -1.653463,-7.125737 0.605322,-14.592728 5.935406,-19.601869 8.263254,-7.7676213 21.259394,-7.3694901 29.027016,0.889701 4.594759,-0.905951 8.998578,-2.591915 13.028641,-4.980702 -1.531587,4.749136 -4.736949,8.783262 -9.018891,11.346739 4.066626,-0.479382 8.039813,-1.568149 11.781434,-3.229738 -2.754418,4.127565 -6.223847,7.722933 -10.23766,10.627666 z" /></svg>
            </a>
            <a href="https://www.facebook.com/CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 50,0 C 22.5,0 0,22.5 0,50 0,74.75 17.998047,95.251952 41.748047,99.501953 L 42.05078,99.25293 c -0.01621,-0.0029 -0.03262,-0.0019 -0.04883,-0.0049 V 63.999023 h -12.5 V 50 h 12.5 V 38.999022 c 0,-12.5 7.997069,-19.497069 19.49707,-19.497069 3.499999,0 7.500977,0.496094 11.000977,0.996094 v 12.753906 h -6.499022 c -6,0 -7.500001,2.997069 -7.500001,6.99707 V 50 h 13.24707 L 69.501953,63.999023 H 58.500977 v 35.249024 c -0.15937,0.02898 -0.319147,0.03618 -0.478517,0.06347 l 0.229493,0.190431 C 82.001953,95.251952 100,74.75 100,50 100,22.5 77.5,0 50,0 Z" /></svg>
            </a>
            <a href="https://www.instagram.com/pollingcanada" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 50,0 C 36.42,0 34.721353,0.05614583 29.388021,0.29947917 24.064688,0.5428125 20.426094,1.3870313 17.246094,2.6236979 13.91276,3.8770313 10.891927,5.8452603 8.391927,8.391927 a 24.526667,24.526667 0 0 0 -5.7682291,8.854167 c -1.23,3.18 -2.0808854,6.818593 -2.32421873,12.141927 C 0.05947917,34.71802 0,36.416667 0,50 0,63.583333 0.05614583,65.278647 0.29947917,70.61198 0.5428125,75.935313 1.3870313,79.573907 2.6236979,82.753907 3.8770313,86.08724 5.8452603,89.108073 8.391927,91.608073 a 24.53,24.53 0 0 0 8.854167,5.76823 c 3.18,1.233334 6.818594,2.080884 12.141927,2.324217 C 34.721353,99.943853 36.42,100 50,100 c 13.58,0 15.278647,-0.05615 20.61198,-0.29948 5.323333,-0.243333 8.961927,-1.08755 12.141927,-2.324217 3.333333,-1.253333 6.354166,-3.221563 8.854166,-5.76823 a 24.526667,24.526667 0 0 0 5.76823,-8.854166 c 1.233334,-3.18 2.080884,-6.818594 2.324217,-12.141927 C 99.943853,65.278647 100,63.58 100,50 100,36.42 99.943853,34.721353 99.70052,29.388021 99.457187,24.064688 98.61297,20.426094 97.376303,17.246094 A 24.51,24.51 0 0 0 91.608073,8.391927 24.526667,24.526667 0 0 0 82.753907,2.6236979 c -3.18,-1.23 -6.818594,-2.0808854 -12.141927,-2.32421873 C 65.28198,0.05947917 63.583333,0 50,0 Z m 0,9.0104167 c 13.35,0 14.935,0.046458 20.208333,0.2864583 4.873334,0.2233333 7.52052,1.03526 9.283854,1.72526 2.333333,0.903334 3.9987,1.990313 5.7487,3.73698 1.75,1.75 2.833643,3.415364 3.736976,5.748698 0.686667,1.763333 1.501927,4.41052 1.725264,9.283854 C 90.943123,35.065 90.989583,36.65 90.989583,50 c 0,13.35 -0.04646,14.935 -0.286456,20.208333 -0.223337,4.873334 -1.035264,7.52052 -1.725264,9.283854 a 15.486667,15.486667 0 0 1 -3.736976,5.7487 15.473333,15.473333 0 0 1 -5.7487,3.736976 C 77.728853,89.66453 75.081667,90.47979 70.208333,90.703127 64.935,90.943123 63.353333,90.989583 50,90.989583 c -13.353333,0 -14.935,-0.04646 -20.208333,-0.286456 -4.873334,-0.223337 -7.520521,-1.035264 -9.283854,-1.725264 a 15.486667,15.486667 0 0 1 -5.748698,-3.736976 15.493333,15.493333 0 0 1 -3.73698,-5.7487 C 10.335469,77.728853 9.5202083,75.081667 9.296875,70.208333 9.056875,64.935 9.0104167,63.35 9.0104167,50 c 0,-13.35 0.046458,-14.935 0.2864583,-20.208333 0.2233333,-4.873334 1.03526,-7.520521 1.72526,-9.283854 0.903334,-2.333334 1.990313,-3.998698 3.73698,-5.748698 a 15.476667,15.476667 0 0 1 5.748698,-3.73698 c 1.763333,-0.686666 4.41052,-1.5019267 9.283854,-1.72526 C 35.065,9.056875 36.65,9.0104167 50,9.0104167 Z m 27.01823,8.7500003 a 6.075,6.075 0 0 0 -5.989583,6.074218 6.075,6.075 0 1 0 12.148436,0 6.075,6.075 0 0 0 -6.158853,-6.074218 z M 50,24.296875 a 25.703126,25.703126 0 0 0 0,51.406252 25.703126,25.703126 0 0 0 0,-51.406252 z m 0,9.016927 a 16.686197,16.686197 0 0 1 0,33.372395 16.686197,16.686197 0 0 1 0,-33.372395 z" /></svg>
            </a>
            <a href="https://mstdn.ca/@CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 46.027504,-8.2254954e-7 C 29.584905,-8.2254954e-7 26.055308,1.0088161 24.182369,1.2860676 13.390402,2.8813948 3.5354639,10.489449 1.1443162,21.361356 -0.00579635,26.715555 -0.12704244,32.653306 0.08661504,38.098274 0.39119082,45.906801 0.450179,53.699192 1.1593403,61.475873 c 0.4902626,5.165735 1.346292,10.291701 2.5601177,15.336666 2.2729573,9.317463 11.472398,17.071134 20.48695,20.234545 9.651311,3.298956 20.031206,3.845486 29.976212,1.580542 1.094009,-0.254463 2.175437,-0.549961 3.242215,-0.886426 2.418328,-0.768006 5.249775,-1.625104 7.331792,-3.13404 0.02862,-0.02123 0.05265,-0.04974 0.06911,-0.08112 0.01662,-0.03154 0.02582,-0.06663 0.02705,-0.102171 v -7.536121 c -6.16e-4,-0.03323 -0.0092,-0.06331 -0.02405,-0.09316 -0.01477,-0.02969 -0.03695,-0.05766 -0.06311,-0.07812 -0.02615,-0.02046 -0.05768,-0.03483 -0.09014,-0.04206 -0.03231,-0.0072 -0.06385,-0.0074 -0.09616,0 -6.371745,1.521859 -12.902309,2.286657 -19.453287,2.274657 -11.273787,0 -14.306244,-5.351092 -15.174405,-7.578188 -0.698006,-1.924785 -1.139039,-3.930893 -1.316117,-5.970602 -0.0018,-0.03415 0.0042,-0.07079 0.01803,-0.10217 0.01385,-0.03123 0.03348,-0.05943 0.06009,-0.08112 0.02662,-0.02169 0.05962,-0.03483 0.09315,-0.04206 0.03354,-0.0074 0.06592,-0.0086 0.09915,0 6.265438,1.511398 12.689338,2.276352 19.134775,2.274659 1.550014,0 3.095306,-0.0011 4.645473,-0.04206 6.482361,-0.181848 13.315774,-0.512432 19.693673,-1.757827 0.159079,-0.03185 0.317421,-0.06125 0.45373,-0.102171 10.060084,-1.931708 19.634212,-7.994191 20.607143,-23.34755 0.03631,-0.604468 0.126201,-6.331958 0.126201,-6.959194 0.0045,-2.13171 0.687309,-15.120011 -0.09915,-23.101154 C 92.022253,11.394933 82.65758,2.9268567 71.556564,1.2860676 69.683625,1.0088161 62.588686,-8.2254954e-7 46.150702,-8.2254954e-7 Z M 32.310442,16.361314 c 5.414199,0 9.508118,2.082233 12.235679,6.241037 l 2.629228,4.417105 2.638244,-4.417105 c 2.727561,-4.158804 6.818538,-6.241037 12.22366,-6.241037 4.67327,0 8.443191,1.645465 11.325215,4.849799 2.782177,3.208796 4.17078,7.541785 4.167703,12.998907 V 60.904956 H 66.950154 V 34.997287 c 0,-5.4542 -2.272822,-8.236247 -6.896091,-8.236247 -5.08235,0 -7.626265,3.290153 -7.626265,9.789744 V 50.733595 H 41.913888 V 36.550784 c 0,-6.499592 -2.55293,-9.789744 -7.63528,-9.789744 -4.595885,0 -6.890083,2.782047 -6.890083,8.236247 V 60.904956 H 16.81452 V 34.21002 c 0,-5.454199 1.391616,-9.787034 4.176717,-12.998907 2.873101,-3.204334 6.641474,-4.849799 11.319205,-4.849799 z" /></svg>
            </a>
          </div>
        </footer>
      </div>
    </>
  )
}

Layout.propTypes = {
  children: PropTypes.node.isRequired,
}

export default Layout

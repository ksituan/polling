/**
 * Layout component that queries for data
 * with Gatsby's useStaticQuery component
 *
 * See: https://www.gatsbyjs.com/docs/use-static-query/
 */

import * as React from "react"
import PropTypes from "prop-types"
import { useStaticQuery, graphql } from "gatsby"

import Header from "./header"
import "../css/style.css"

const Layout = ({ children }) => {
  const data = useStaticQuery(graphql`
    query SiteTitleQuery {
      site {
        siteMetadata {
          title
        }
      }
    }
  `)

  React.useEffect(() => {
    window.addEventListener("scroll", () => {
      // Dealing with Safari difference.
      // look into scrollingElement https://caniuse.com/#feat=document-scrollingelement
      let scrollTop = document.body.scrollTop ? document.body.scrollTop : document.documentElement.scrollTop; 
      let newPos = scrollTop + "px";
      document.documentElement.style.setProperty('--scrollPos', newPos);
    });
  }, []);

  return (
    <>
      <Header siteTitle={data.site.siteMetadata?.title || `Title`} />
      <div>
        <main>{children}</main>
        <footer>
          <p>ðŸ„¯ {new Date().getFullYear()} {"//"} site by <a href="https://awmcphee.ca" target="_blank" rel="noreferrer">Prairie Heart Workshop</a></p>
          <div className="socialBox">
            <a href="https://twitter.com/CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="m 86.685417,29.60037 c 0.06094,0.881577 0.06094,1.763153 0.06094,2.652854 0,27.109486 -20.637822,58.374975 -58.374974,58.374975 v -0.01625 C 17.223707,90.628199 6.307599,87.435024 -3.076923,81.414305 -1.4559602,81.609308 0.1731278,81.70681 1.8062783,81.710872 11.044548,81.718972 20.01875,78.619261 27.286676,72.91136 18.507477,72.744794 10.808919,67.020643 8.119502,58.663949 c 3.07536,0.593135 6.24416,0.471258 9.262645,-0.353443 C 7.810747,56.376726 0.924702,47.96722 0.924702,38.200817 v -0.260004 c 2.8519196,1.588462 6.045094,2.470039 9.311396,2.56754 C 1.2212692,34.483572 -1.5575243,22.490884 3.8863108,13.114488 14.302724,25.931876 29.671401,33.723872 46.169471,34.548573 c -1.653463,-7.125737 0.605322,-14.592728 5.935406,-19.601869 8.263254,-7.7676213 21.259394,-7.3694901 29.027016,0.889701 4.594759,-0.905951 8.998578,-2.591915 13.028641,-4.980702 -1.531587,4.749136 -4.736949,8.783262 -9.018891,11.346739 4.066626,-0.479382 8.039813,-1.568149 11.781434,-3.229738 -2.754418,4.127565 -6.223847,7.722933 -10.23766,10.627666 z" /></svg>
            </a>
            <a href="https://www.facebook.com/CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 50,0 C 22.5,0 0,22.5 0,50 0,74.75 17.998047,95.251952 41.748047,99.501953 L 42.05078,99.25293 c -0.01621,-0.0029 -0.03262,-0.0019 -0.04883,-0.0049 V 63.999023 h -12.5 V 50 h 12.5 V 38.999022 c 0,-12.5 7.997069,-19.497069 19.49707,-19.497069 3.499999,0 7.500977,0.496094 11.000977,0.996094 v 12.753906 h -6.499022 c -6,0 -7.500001,2.997069 -7.500001,6.99707 V 50 h 13.24707 L 69.501953,63.999023 H 58.500977 v 35.249024 c -0.15937,0.02898 -0.319147,0.03618 -0.478517,0.06347 l 0.229493,0.190431 C 82.001953,95.251952 100,74.75 100,50 100,22.5 77.5,0 50,0 Z" /></svg>
            </a>
            <a href="https://www.instagram.com/pollingcanada" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 50,0 C 36.42,0 34.721353,0.05614583 29.388021,0.29947917 24.064688,0.5428125 20.426094,1.3870313 17.246094,2.6236979 13.91276,3.8770313 10.891927,5.8452603 8.391927,8.391927 a 24.526667,24.526667 0 0 0 -5.7682291,8.854167 c -1.23,3.18 -2.0808854,6.818593 -2.32421873,12.141927 C 0.05947917,34.71802 0,36.416667 0,50 0,63.583333 0.05614583,65.278647 0.29947917,70.61198 0.5428125,75.935313 1.3870313,79.573907 2.6236979,82.753907 3.8770313,86.08724 5.8452603,89.108073 8.391927,91.608073 a 24.53,24.53 0 0 0 8.854167,5.76823 c 3.18,1.233334 6.818594,2.080884 12.141927,2.324217 C 34.721353,99.943853 36.42,100 50,100 c 13.58,0 15.278647,-0.05615 20.61198,-0.29948 5.323333,-0.243333 8.961927,-1.08755 12.141927,-2.324217 3.333333,-1.253333 6.354166,-3.221563 8.854166,-5.76823 a 24.526667,24.526667 0 0 0 5.76823,-8.854166 c 1.233334,-3.18 2.080884,-6.818594 2.324217,-12.141927 C 99.943853,65.278647 100,63.58 100,50 100,36.42 99.943853,34.721353 99.70052,29.388021 99.457187,24.064688 98.61297,20.426094 97.376303,17.246094 A 24.51,24.51 0 0 0 91.608073,8.391927 24.526667,24.526667 0 0 0 82.753907,2.6236979 c -3.18,-1.23 -6.818594,-2.0808854 -12.141927,-2.32421873 C 65.28198,0.05947917 63.583333,0 50,0 Z m 0,9.0104167 c 13.35,0 14.935,0.046458 20.208333,0.2864583 4.873334,0.2233333 7.52052,1.03526 9.283854,1.72526 2.333333,0.903334 3.9987,1.990313 5.7487,3.73698 1.75,1.75 2.833643,3.415364 3.736976,5.748698 0.686667,1.763333 1.501927,4.41052 1.725264,9.283854 C 90.943123,35.065 90.989583,36.65 90.989583,50 c 0,13.35 -0.04646,14.935 -0.286456,20.208333 -0.223337,4.873334 -1.035264,7.52052 -1.725264,9.283854 a 15.486667,15.486667 0 0 1 -3.736976,5.7487 15.473333,15.473333 0 0 1 -5.7487,3.736976 C 77.728853,89.66453 75.081667,90.47979 70.208333,90.703127 64.935,90.943123 63.353333,90.989583 50,90.989583 c -13.353333,0 -14.935,-0.04646 -20.208333,-0.286456 -4.873334,-0.223337 -7.520521,-1.035264 -9.283854,-1.725264 a 15.486667,15.486667 0 0 1 -5.748698,-3.736976 15.493333,15.493333 0 0 1 -3.73698,-5.7487 C 10.335469,77.728853 9.5202083,75.081667 9.296875,70.208333 9.056875,64.935 9.0104167,63.35 9.0104167,50 c 0,-13.35 0.046458,-14.935 0.2864583,-20.208333 0.2233333,-4.873334 1.03526,-7.520521 1.72526,-9.283854 0.903334,-2.333334 1.990313,-3.998698 3.73698,-5.748698 a 15.476667,15.476667 0 0 1 5.748698,-3.73698 c 1.763333,-0.686666 4.41052,-1.5019267 9.283854,-1.72526 C 35.065,9.056875 36.65,9.0104167 50,9.0104167 Z m 27.01823,8.7500003 a 6.075,6.075 0 0 0 -5.989583,6.074218 6.075,6.075 0 1 0 12.148436,0 6.075,6.075 0 0 0 -6.158853,-6.074218 z M 50,24.296875 a 25.703126,25.703126 0 0 0 0,51.406252 25.703126,25.703126 0 0 0 0,-51.406252 z m 0,9.016927 a 16.686197,16.686197 0 0 1 0,33.372395 16.686197,16.686197 0 0 1 0,-33.372395 z" /></svg>
            </a>
            <a href="https://mstdn.ca/@CanadianPolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="M 46.027504,-8.2254954e-7 C 29.584905,-8.2254954e-7 26.055308,1.0088161 24.182369,1.2860676 13.390402,2.8813948 3.5354639,10.489449 1.1443162,21.361356 -0.00579635,26.715555 -0.12704244,32.653306 0.08661504,38.098274 0.39119082,45.906801 0.450179,53.699192 1.1593403,61.475873 c 0.4902626,5.165735 1.346292,10.291701 2.5601177,15.336666 2.2729573,9.317463 11.472398,17.071134 20.48695,20.234545 9.651311,3.298956 20.031206,3.845486 29.976212,1.580542 1.094009,-0.254463 2.175437,-0.549961 3.242215,-0.886426 2.418328,-0.768006 5.249775,-1.625104 7.331792,-3.13404 0.02862,-0.02123 0.05265,-0.04974 0.06911,-0.08112 0.01662,-0.03154 0.02582,-0.06663 0.02705,-0.102171 v -7.536121 c -6.16e-4,-0.03323 -0.0092,-0.06331 -0.02405,-0.09316 -0.01477,-0.02969 -0.03695,-0.05766 -0.06311,-0.07812 -0.02615,-0.02046 -0.05768,-0.03483 -0.09014,-0.04206 -0.03231,-0.0072 -0.06385,-0.0074 -0.09616,0 -6.371745,1.521859 -12.902309,2.286657 -19.453287,2.274657 -11.273787,0 -14.306244,-5.351092 -15.174405,-7.578188 -0.698006,-1.924785 -1.139039,-3.930893 -1.316117,-5.970602 -0.0018,-0.03415 0.0042,-0.07079 0.01803,-0.10217 0.01385,-0.03123 0.03348,-0.05943 0.06009,-0.08112 0.02662,-0.02169 0.05962,-0.03483 0.09315,-0.04206 0.03354,-0.0074 0.06592,-0.0086 0.09915,0 6.265438,1.511398 12.689338,2.276352 19.134775,2.274659 1.550014,0 3.095306,-0.0011 4.645473,-0.04206 6.482361,-0.181848 13.315774,-0.512432 19.693673,-1.757827 0.159079,-0.03185 0.317421,-0.06125 0.45373,-0.102171 10.060084,-1.931708 19.634212,-7.994191 20.607143,-23.34755 0.03631,-0.604468 0.126201,-6.331958 0.126201,-6.959194 0.0045,-2.13171 0.687309,-15.120011 -0.09915,-23.101154 C 92.022253,11.394933 82.65758,2.9268567 71.556564,1.2860676 69.683625,1.0088161 62.588686,-8.2254954e-7 46.150702,-8.2254954e-7 Z M 32.310442,16.361314 c 5.414199,0 9.508118,2.082233 12.235679,6.241037 l 2.629228,4.417105 2.638244,-4.417105 c 2.727561,-4.158804 6.818538,-6.241037 12.22366,-6.241037 4.67327,0 8.443191,1.645465 11.325215,4.849799 2.782177,3.208796 4.17078,7.541785 4.167703,12.998907 V 60.904956 H 66.950154 V 34.997287 c 0,-5.4542 -2.272822,-8.236247 -6.896091,-8.236247 -5.08235,0 -7.626265,3.290153 -7.626265,9.789744 V 50.733595 H 41.913888 V 36.550784 c 0,-6.499592 -2.55293,-9.789744 -7.63528,-9.789744 -4.595885,0 -6.890083,2.782047 -6.890083,8.236247 V 60.904956 H 16.81452 V 34.21002 c 0,-5.454199 1.391616,-9.787034 4.176717,-12.998907 2.873101,-3.204334 6.641474,-4.849799 11.319205,-4.849799 z" /></svg>
            </a>
            <a href="https://post.news/canadianpolling" rel="me" className="social">
              <svg viewBox="0 0 100 100"><path d="m -3.076923,65.356272 v -0.476103 l 0.9515204,-0.333373 c 0.6345751,-0.190647 1.0466724,-0.476102 1.2369765,-0.857054 0.2221355,-0.38095 0.3330321,-0.888884 0.3330321,-1.523802 V 37.214886 c 0,-0.634917 -0.1108966,-1.142851 -0.3330321,-1.523802 -0.2221355,-0.38095 -0.6503197,-0.682493 -1.2845525,-0.904629 L -3.076923,34.405505 V 33.929402 H 8.485076 c 4.726455,0 8.136526,0.872798 10.229871,2.619077 2.125177,1.714106 3.187936,3.984064 3.187936,6.80919 0,1.809599 -0.443929,3.476129 -1.332129,4.999589 -0.856368,1.49197 -2.283991,2.682397 -4.282184,3.571281 -1.998192,0.888885 -4.694623,1.333156 -8.088607,1.333156 H 6.582036 v 8.761517 c 0,1.238004 0.618488,2.047481 1.855807,2.428431 l 1.42728,0.428526 v 0.476103 z M 6.582036,52.30949 h 1.808231 c 1.554264,0 2.823072,-0.253967 3.806423,-0.761901 0.983352,-0.507934 1.712737,-1.396818 2.18884,-2.666653 0.47576,-1.269835 0.71364,-3.031516 0.71364,-5.285387 0,-2.285703 -0.269712,-4.063129 -0.808792,-5.332964 C 13.782786,36.99275 13.02157,36.119953 12.006386,35.643508 10.991203,35.135574 9.722395,34.881607 8.199963,34.881607 H 6.582036 Z m 28.258101,13.761107 c -2.410974,0 -4.504319,-0.49219 -6.280719,-1.476226 -1.776399,-1.015868 -3.156104,-2.444175 -4.139456,-4.285607 -0.95152,-1.841089 -1.42728,-3.999808 -1.42728,-6.475815 0,-2.476006 0.507591,-4.618981 1.522432,-6.428239 1.046673,-1.809257 2.458209,-3.206076 4.234608,-4.190112 1.808231,-0.984036 3.838256,-1.476225 6.090415,-1.476225 2.25216,0 4.266097,0.492189 6.042497,1.476225 1.7764,0.952205 3.172191,2.333279 4.187032,4.142536 1.047015,1.809258 1.570351,3.967977 1.570351,6.475815 0,2.507838 -0.491847,4.682302 -1.475199,6.523392 -0.95152,1.809258 -2.31548,3.222162 -4.09188,4.23803 -1.744568,0.984036 -3.822168,1.476226 -6.232801,1.476226 z m 0,-0.952548 c 1.109993,0 1.998193,-0.317287 2.664257,-0.952204 0.666407,-0.634918 1.142167,-1.761682 1.427623,-3.380636 0.316945,-1.618954 0.47576,-3.904656 0.47576,-6.856765 0,-2.983941 -0.158815,-5.285388 -0.47576,-6.904342 -0.285456,-1.618954 -0.761216,-2.745718 -1.427623,-3.380635 -0.666064,-0.634917 -1.554264,-0.952205 -2.664257,-0.952205 -1.110335,0 -2.014279,0.317288 -2.712175,0.952205 -0.666064,0.634917 -1.157911,1.761681 -1.475199,3.380635 -0.285456,1.618954 -0.428184,3.920401 -0.428184,6.904342 0,2.952109 0.142728,5.237811 0.428184,6.856765 0.317288,1.618954 0.809135,2.745718 1.475199,3.380636 0.697896,0.634917 1.60184,0.952204 2.712175,0.952204 z m 22.121138,0.952548 c -1.554264,0 -2.950056,-0.190646 -4.187032,-0.571597 -1.237319,-0.349119 -2.379143,-0.793731 -3.425816,-1.333155 l 0.04758,-5.666339 h 0.47576 l 1.617585,2.856958 c 0.697896,1.269834 1.459112,2.222039 2.283991,2.856957 0.856369,0.603086 1.934872,0.904628 3.235512,0.904628 1.522432,0 2.743664,-0.333374 3.663695,-1.000123 0.951521,-0.698238 1.427281,-1.618953 1.427281,-2.761805 0,-1.047699 -0.333032,-1.904752 -0.999096,-2.571158 -0.666065,-0.666749 -1.903041,-1.269835 -3.711272,-1.809258 l -1.998197,-0.619173 c -1.935214,-0.571255 -3.457647,-1.460139 -4.567982,-2.666653 -1.109993,-1.206172 -1.665161,-2.682398 -1.665161,-4.428335 0,-2.095056 0.824537,-3.872825 2.473953,-5.332963 1.649758,-1.460139 4.012815,-2.190208 7.089511,-2.190208 1.237319,0 2.394888,0.142728 3.473392,0.428526 a 12.874276,12.874276 0 0 1 3.187936,1.190427 l -0.285456,5.14266 h -0.475761 l -1.66516,-2.952109 c -0.602744,-1.0477 -1.205488,-1.777769 -1.808231,-2.190208 -0.570913,-0.444271 -1.443368,-0.666749 -2.617024,-0.666749 -1.078504,0 -2.093344,0.301543 -3.044865,0.904629 -0.951863,0.603085 -1.427623,1.460138 -1.427623,2.571158 0,1.079188 0.396695,1.936241 1.189401,2.571159 0.824879,0.634917 2.030366,1.222258 3.616462,1.761682 l 2.140921,0.619172 c 2.283991,0.698238 3.917662,1.66653 4.900672,2.904533 0.983352,1.206172 1.475199,2.666653 1.475199,4.380759 0,2.317534 -0.920032,4.174368 -2.759752,5.571186 -1.807888,1.396818 -4.361591,2.095399 -7.660423,2.095399 z m 21.532427,0 c -2.030025,0 -3.61612,-0.507934 -4.757944,-1.523801 -1.110336,-1.015869 -1.665503,-2.634822 -1.665503,-4.856862 V 43.404903 H 68.787167 V 42.9288 l 1.142167,-0.190304 c 0.983352,-0.222136 1.823633,-0.539765 2.521529,-0.952205 0.729727,-0.412782 1.443367,-0.968292 2.141263,-1.66653 l 3.901576,-4.333182 h 0.47576 l -0.142728,6.666119 h 5.329199 v 0.952205 h -5.376775 v 17.142084 c 0,1.111019 0.23788,1.952328 0.71364,2.523582 0.507592,0.571255 1.142167,0.857053 1.903383,0.857053 0.666064,0 1.253063,-0.158815 1.760313,-0.476102 0.507591,-0.349119 1.015183,-0.809477 1.522775,-1.381074 l 0.47576,0.476103 c -0.634575,1.079188 -1.506688,1.936583 -2.617023,2.571158 -1.109993,0.63526 -2.458209,0.95289 -4.044304,0.95289 z m 14.337495,0 c -1.142167,0 -2.109432,-0.396695 -2.902479,-1.190428 -0.793048,-0.793731 -1.189401,-1.745937 -1.189401,-2.856957 0,-1.11102 0.396353,-2.079311 1.189401,-2.904533 0.793047,-0.825221 1.760312,-1.238003 2.902479,-1.238003 1.141825,0 2.109432,0.412782 2.90248,1.238003 0.7927,0.825222 1.1894,1.793513 1.1894,2.904533 0,1.11102 -0.3967,2.063567 -1.1894,2.856957 -0.793048,0.79339 -1.760655,1.190428 -2.90248,1.190428 z" /></svg>
            </a>
          </div>
        </footer>
      </div>
    </>
  )
}

Layout.propTypes = {
  children: PropTypes.node.isRequired,
}

export default Layout

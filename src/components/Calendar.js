import * as React from "react"

import calendar from "../../content/calendar.json"
import parties from "../../content/parties.json"

parties = parties.content;

let brandColours = {
    "maroon" : "#8b4943",
    "red" : "#c94141",
    "orange" : "#e69f4a",
    "yellow" : "#ebc53f",
    "green" : "#85ab53",
    "darkGreen" : "#5f7b3b",
    "teal" : "#88c9c3",
    "blue" : "#598dab",
    "darkBlue" : "#52709e",
    "purple" : "#af7ac8",
    "gray" : "#d0d0d0",
  }

let jdict = {
    BC: "British Columbia",
    AB: "Alberta",
    SK: "Saskatchewan",
    MB: "Manitoba",
    ON: "Ontario",
    QC: "Quebec",
    NB: "New Brunswick",
    PE: "Prince Edward Island",
    NS: "Nova Scotia",
    NL: "Newfoundland & Lab.",
    YT: "Yukon",
    NT: "Northwest Territories",
    NU: "Nunavut",
    Canada_BC: "British Columbia",
    Canada_AB: "Alberta",
    Canada_SKMB: "Sask./Man.",
    Canada_ON: "Ontario",
    Canada_QC: "Quebec",
    Canada_ATL: "Atlantic",
    Canada: "Canada"
}

let tdict = {
    legislative: "General election",
    municipal: "Municipal elections",
    by: "By-election"
}

function Calendar() {

    calendar.map(function (event) {
        event.date = new Date(event.date)
        return(event)})
    calendar = calendar.filter(event => event.date - new Date <= 1000*60*60*24*365 || event.minority) // We only want the next year
    calendar.sort((a, b) => a.date - b.date)

    return(
        <div className="calendar">
            {calendar.map(function (event, index) {
                let party = ["NT", "NU"].includes(event.jurisdiction) ? "" : parties[event.jurisdiction][event.party]
                return(
                    <div className={index < 10 ? "electionEvent" : "electionEvent lowPriority"}>
                        <div className="electionSymbol">
                        <svg viewBox="0 0 100 100">
                            {event.type === "leadership" && <path fill={brandColours[party.colour]} d={party.logo} />}
                            {event.type === "legislative" && <path fill="black" d="m 45.710103,12.711507 0.411861,0.521415 c 0.482787,0.610647 1.019992,1.032273 1.427818,1.574064 0.385824,0.512545 0.688388,1.172786 0.885219,1.855184 l -5.29e-4,5.29e-4 c -0.06063,0.05519 -0.117623,0.11529 -0.172082,0.178284 -0.682988,-0.196208 -1.337617,-0.497839 -1.853115,-0.885217 -0.540594,-0.406255 -0.963422,-0.951946 -1.576131,-1.435571 l -0.521417,-0.412378 v 8.68164 l 0.521417,-0.411861 c 0.611118,-0.482371 1.033878,-1.020292 1.576131,-1.42782 0.514765,-0.386869 1.165288,-0.697906 1.843815,-0.895036 0.05735,0.06724 0.117065,0.131623 0.181382,0.19017 l 5.29e-4,5.29e-4 c -0.196617,0.680031 -0.498734,1.331404 -0.885219,1.844848 -0.407831,0.541797 -0.945009,0.963945 -1.427818,1.574581 l -0.411861,0.521415 h 2.002977 c -0.391527,0.188945 -0.760111,0.427589 -1.089339,0.722437 -0.637125,0.570594 -1.124204,1.343294 -1.361673,2.297018 h -0.407729 v 2.601391 h 0.389126 c 0.02986,0.124065 0.06216,0.247184 0.101285,0.367419 -0.373983,-0.320597 -0.851202,-0.476456 -1.326018,-0.476456 -0.492667,0 -0.9897,0.16595 -1.369425,0.511596 -0.274134,0.249533 -0.476329,0.596691 -0.566375,1.014409 0.008,-0.08214 0.01254,-0.166173 0.01188,-0.252698 0.0049,-0.647679 -0.240363,-1.176622 -0.619085,-1.521354 -0.379722,-0.345646 -0.876758,-0.512114 -1.369425,-0.512114 -0.492668,0 -0.989185,0.166468 -1.368909,0.512114 -0.37872,0.344732 -0.623986,0.873675 -0.619083,1.521354 -5.29e-4,0.0672 0.003,0.132312 0.0078,0.196887 -0.11539,-0.03949 -0.22665,-0.07916 -0.340032,-0.118856 0.248394,-0.330553 0.400212,-0.764459 0.396359,-1.273307 0.0049,-0.64768 -0.240363,-1.177138 -0.619085,-1.521871 -0.379722,-0.345646 -0.876239,-0.511597 -1.368909,-0.511597 -0.492607,0 -0.989701,0.165951 -1.369425,0.511597 -0.37872,0.344733 -0.623986,0.874191 -0.619083,1.521871 -4.5e-5,0.006 5.29e-4,0.0116 5.29e-4,0.01757 -0.169577,-0.05409 -0.339828,-0.107774 -0.514696,-0.160197 0.161734,-0.29485 0.255738,-0.650761 0.252698,-1.052649 0.0049,-0.647679 -0.240424,-1.177139 -0.619083,-1.521871 -0.379724,-0.345646 -0.876758,-0.511597 -1.369428,-0.511597 -0.492642,0 -0.989183,0.165951 -1.368907,0.511597 -0.37872,0.344732 -0.623986,0.874192 -0.619084,1.521871 -7.41e-4,0.09674 0.0055,0.18989 0.0155,0.28112 -0.179892,-0.01244 -0.359691,-0.01633 -0.539502,-0.02067 0.03031,-0.151121 0.04689,-0.311274 0.04547,-0.479557 0.0049,-0.647679 -0.240363,-1.176623 -0.619083,-1.521355 -0.379724,-0.345645 -0.876758,-0.511596 -1.369426,-0.511596 -0.492667,0 -0.989185,0.165951 -1.368908,0.511596 -0.378721,0.344732 -0.623986,0.873676 -0.619084,1.521355 -0.0027,0.323704 0.05717,0.618075 0.164848,0.874365 -0.07514,0.01547 -0.15091,0.02958 -0.225826,0.04547 l -0.0078,-0.01757 -0.255798,0.05684 c -0.01711,0.0038 -0.03455,0.0091 -0.05168,0.01292 -0.02377,-0.594116 -0.258919,-1.08199 -0.614432,-1.405599 -0.379724,-0.345646 -0.876241,-0.511596 -1.368909,-0.511597 -0.492662,0 -0.989702,0.165951 -1.369426,0.511597 -0.378719,0.344733 -0.623986,0.874191 -0.619083,1.521871 -0.0036,0.469267 0.125822,0.87502 0.340548,1.194759 -0.09249,0.04878 -0.184261,0.100062 -0.275953,0.151412 -0.106081,-0.323969 -0.283036,-0.597402 -0.509529,-0.803568 -0.379723,-0.345648 -0.876758,-0.511597 -1.369426,-0.511597 -0.492668,0 -0.991251,0.165949 -1.370975,0.511597 -0.378719,0.344732 -0.621919,0.873675 -0.617017,1.521354 -0.0055,0.648656 0.237881,1.176784 0.617017,1.521869 0.07545,0.06868 0.156434,0.128331 0.240295,0.182936 -0.0835,0.09344 -0.164556,0.18841 -0.244946,0.283705 -0.08614,-0.133644 -0.185193,-0.254762 -0.298173,-0.357603 -0.379723,-0.345624 -0.876244,-0.511596 -1.368909,-0.511596 -0.492665,0 -0.989703,0.165972 -1.369425,0.511596 -0.379136,0.345109 -0.62454,0.87322 -0.619084,1.521873 -0.0049,0.647673 0.240365,1.176623 0.619084,1.521354 0.301913,0.274814 0.678117,0.434292 1.067118,0.488857 -0.04931,0.112972 -0.09812,0.226555 -0.144694,0.341583 -0.349146,-0.24552 -0.767425,-0.365868 -1.183907,-0.365868 -0.492665,0 -0.989703,0.166471 -1.369426,0.512112 -0.378718,0.34473 -0.62398,0.87368 -0.619083,1.521354 -0.0055,0.648652 0.239947,1.178314 0.619083,1.523423 0.379723,0.345583 0.876761,0.511596 1.369426,0.511596 0.06607,0 0.131991,-0.0033 0.197921,-0.0093 -0.01005,0.07281 -0.02294,0.147643 -0.03152,0.219626 -0.13489,-0.02593 -0.271911,-0.04031 -0.40876,-0.04031 -0.492666,0 -0.989187,0.165951 -1.368909,0.511596 -0.378719,0.344728 -0.623981,0.87368 -0.619084,1.521354 -0.0055,0.648652 0.239948,1.17883 0.619084,1.523939 0.379722,0.345641 0.876243,0.511595 1.368909,0.511595 0.179126,0 0.358915,-0.02262 0.5333,-0.06718 0.0011,0.0076 0.0025,0.01516 0.0036,0.02273 -0.401836,0.04992 -0.79202,0.21224 -1.103292,0.495578 -0.379129,0.345109 -0.624539,0.872701 -0.619083,1.521354 -0.0049,0.647673 0.24037,1.176626 0.619083,1.521354 0.379723,0.345644 0.876244,0.512112 1.368909,0.512112 0.325758,0 0.652911,-0.07418 0.947229,-0.22324 0.05339,0.116187 0.103646,0.219551 0.155029,0.326078 -0.07756,0.02622 -0.157925,0.04934 -0.234611,0.07648 l -0.363285,0.129191 0.191203,0.33383 c 1.290787,2.256917 2.394836,4.438515 3.380155,6.586162 -0.308897,0.366625 -0.500675,0.867405 -0.495577,1.466577 -0.0054,0.704708 0.26018,1.277284 0.670243,1.650545 0.406433,0.369954 0.939399,0.547984 1.468128,0.551903 0.639393,1.643911 1.2351,3.316949 1.810742,4.968689 -0.216931,0.02745 -0.436792,0.05362 -0.650089,0.08268 l -0.12299,0.01757 -0.0801,0.0956 c -0.258705,0.309253 -0.447828,0.654351 -0.388607,1.039212 0.05923,0.384863 0.367104,0.687657 0.835608,0.91209 l 0.08785,0.04289 0.09612,-0.01344 c 0.103232,-0.01405 0.211812,-0.0266 0.31626,-0.04031 l 0.149345,0.719336 -0.100769,-0.03462 -1.021126,2.433444 1.826245,2.240171 0.221175,-0.186549 0.204122,0.98185 c -0.02363,0.0034 -0.04826,0.0064 -0.07183,0.0098 l -0.129192,0.01913 -0.07803,0.101801 c -0.240905,0.309706 -0.41497,0.651677 -0.361218,1.02733 0.02107,0.147227 0.0792,0.284006 0.167431,0.41031 -0.04759,0.01027 -0.09711,0.02365 -0.144177,0.03307 l -0.06253,0.01188 -0.05478,0.03307 c -0.666127,0.393023 -1.130546,0.927036 -1.4118,1.517737 -0.352664,0.740638 -0.484447,1.560784 -0.406177,2.356961 0.07197,0.732042 0.18501,1.55354 0.869197,2.258262 0.369637,0.380742 0.910928,0.712402 1.704806,1.005623 l 0.103353,0.03721 0.107487,-0.02326 c 12.850412,-2.850303 32.135751,-4.322635 51.31056,0.01913 l 0.10387,0.02532 0.101285,-0.03514 c 0.683075,-0.237355 1.222431,-0.557347 1.625224,-0.950846 0.62062,-0.606325 0.896972,-1.385509 0.915705,-2.201416 0.01744,-0.757264 0.06164,-1.870731 -0.489892,-2.812232 -0.315159,-0.53798 -0.807577,-1.004927 -1.492414,-1.240234 -0.0045,-0.0024 -0.07439,-0.03878 -0.102836,-0.05374 0.09085,-0.134249 0.148037,-0.278251 0.163296,-0.432532 0.03757,-0.379849 -0.154964,-0.707295 -0.400492,-0.996323 l -0.08165,-0.0956 -0.121441,-0.0155 c 0,0 -0.04175,-0.0055 -0.04341,-0.0057 l 0.205155,-0.987536 0.223242,0.1881 1.826244,-2.240171 -1.02371,-2.433444 -0.100769,0.03462 0.149347,-0.71727 c 0.08781,0.01029 0.332279,0.03824 0.332279,0.03824 l 0.09767,0.01188 0.08785,-0.04341 c 0.481716,-0.245967 0.784847,-0.563144 0.826307,-0.952912 0.04146,-0.389769 -0.170135,-0.71935 -0.433567,-1.00769 L 77.9696,64.92844 77.850744,64.9145 c 0,0 -0.336063,-0.04008 -0.749308,-0.08785 0.602936,-1.660982 1.228466,-3.309281 1.904794,-4.964038 0.0074,6.9e-5 0.01482,0.0011 0.02223,0.0011 0.534638,0 1.073084,-0.178249 1.484148,-0.552421 0.410062,-0.37326 0.675172,-0.945837 0.669727,-1.650544 0.0051,-0.599774 -0.187227,-1.100889 -0.49661,-1.467612 0.985748,-2.147486 2.091129,-4.328645 3.381703,-6.585128 l 0.191204,-0.33383 -0.365352,-0.12919 c -0.07588,-0.02686 -0.155298,-0.05001 -0.232027,-0.07596 0.05144,-0.106736 0.102095,-0.210156 0.155546,-0.326594 0.294108,0.148778 0.620218,0.22324 0.945679,0.22324 0.492668,0 0.991767,-0.166465 1.371492,-0.512112 0.378719,-0.344733 0.621919,-0.873678 0.617016,-1.521354 0.0054,-0.648658 -0.237879,-1.176242 -0.617016,-1.521354 -0.311463,-0.283512 -0.703308,-0.445773 -1.105877,-0.495578 0.0013,-0.0078 0.0024,-0.0155 0.0036,-0.02326 0.175366,0.04492 0.355526,0.0677 0.535366,0.0677 0.49267,0 0.989703,-0.165952 1.369428,-0.511596 0.379074,-0.345112 0.622477,-0.875281 0.617016,-1.523939 0.0049,-0.647679 -0.238358,-1.176623 -0.617016,-1.521354 -0.379725,-0.345647 -0.876758,-0.511596 -1.369428,-0.511596 -0.136856,0 -0.273651,0.01439 -0.40876,0.04031 -0.0085,-0.07198 -0.02151,-0.146818 -0.03152,-0.219626 0.06542,0.0059 0.130808,0.0093 0.196372,0.0093 0.492667,0 0.99125,-0.166011 1.370975,-0.511596 0.379137,-0.345115 0.622996,-0.874766 0.617532,-1.523423 0.0049,-0.647679 -0.238813,-1.176621 -0.617532,-1.521354 -0.379725,-0.345647 -0.878308,-0.512112 -1.370975,-0.512112 -0.415912,0 -0.834009,0.119999 -1.182873,0.364834 -0.04644,-0.114665 -0.09502,-0.227923 -0.14418,-0.340548 0.389118,-0.05452 0.765123,-0.213963 1.067121,-0.488857 0.378719,-0.344734 0.623985,-0.873676 0.619082,-1.521355 0.0055,-0.648657 -0.239945,-1.17676 -0.619082,-1.521872 -0.379725,-0.345627 -0.876242,-0.511596 -1.36891,-0.511596 -0.492667,0 -0.989703,0.165969 -1.369425,0.511596 -0.112876,0.102748 -0.212087,0.223594 -0.298175,0.357084 -0.0805,-0.09541 -0.161848,-0.190664 -0.245461,-0.284221 0.0833,-0.05441 0.164174,-0.113551 0.239262,-0.181901 0.379135,-0.345085 0.624544,-0.873214 0.619083,-1.52187 0.0049,-0.647679 -0.240363,-1.176622 -0.619083,-1.521354 -0.379724,-0.345647 -0.876757,-0.511596 -1.369425,-0.511596 -0.49267,0 -0.989187,0.165949 -1.368909,0.511596 -0.226602,0.206266 -0.403468,0.479911 -0.509529,0.804085 -0.09193,-0.05147 -0.18374,-0.10304 -0.276471,-0.151928 0.214161,-0.31974 0.342032,-0.725493 0.338481,-1.194759 0.0049,-0.647679 -0.238297,-1.177138 -0.617016,-1.521871 -0.379722,-0.345646 -0.876242,-0.511596 -1.368909,-0.511597 -0.492668,0 -0.991767,0.165951 -1.371492,0.511597 -0.355618,0.323704 -0.588983,0.811761 -0.612365,1.406115 -0.01767,-0.004 -0.03559,-0.0095 -0.05323,-0.01344 l -0.254246,-0.05684 -0.0078,0.01757 c -0.07479,-0.01588 -0.150307,-0.03003 -0.225308,-0.04548 0.107682,-0.256289 0.167573,-0.550661 0.164845,-0.874365 0.0049,-0.647679 -0.240363,-1.176622 -0.619082,-1.521354 -0.379628,-0.345655 -0.876661,-0.511606 -1.369328,-0.511606 -0.492668,0 -0.989185,0.165951 -1.368909,0.511597 -0.37872,0.344732 -0.623986,0.873674 -0.619083,1.521353 -0.0013,0.16828 0.01466,0.328439 0.04496,0.479557 -0.180377,0.0044 -0.360595,0.0082 -0.541052,0.02067 0.01,-0.09123 0.01625,-0.184373 0.01551,-0.28112 0.0049,-0.647678 -0.238297,-1.177138 -0.617017,-1.52187 -0.379724,-0.345647 -0.876757,-0.511597 -1.369425,-0.511597 -0.492667,0 -0.991253,0.16595 -1.370975,0.511597 -0.378722,0.344732 -0.621919,0.874192 -0.617016,1.52187 -0.003,0.401885 0.08999,0.7578 0.251145,1.052649 -0.174975,0.05246 -0.34553,0.10658 -0.515213,0.160714 -2e-6,-0.0061 5.29e-4,-0.01192 5.29e-4,-0.01809 0.0049,-0.647679 -0.238813,-1.177138 -0.617532,-1.521871 -0.379725,-0.345645 -0.876242,-0.511596 -1.368909,-0.511596 -0.492667,0 -0.991251,0.165951 -1.370976,0.511596 -0.378719,0.344733 -0.622435,0.874192 -0.617534,1.521871 -0.0039,0.509147 0.147187,0.9432 0.395327,1.273824 -0.113472,0.03973 -0.225068,0.07934 -0.340548,0.118856 0.0047,-0.06474 0.0083,-0.130025 0.0078,-0.197404 0.0049,-0.647678 -0.238297,-1.176622 -0.617016,-1.521354 -0.379722,-0.345646 -0.876758,-0.512113 -1.369425,-0.512113 -0.492668,0 -0.991251,0.166467 -1.370976,0.512113 -0.378719,0.344732 -0.621919,0.873676 -0.617016,1.521354 -7.94e-4,0.09006 0.0043,0.177218 0.01291,0.262517 -0.08836,-0.422208 -0.291603,-0.772702 -0.567926,-1.024227 -0.379725,-0.345646 -0.876239,-0.511597 -1.368909,-0.511597 -0.469151,0 -0.942504,0.152237 -1.314648,0.465088 0.03764,-0.116632 0.06874,-0.235829 0.09767,-0.356051 h 0.379307 v -2.601391 h -0.398426 v -5.29e-4 c -0.237503,-0.953529 -0.724614,-1.725967 -1.361675,-2.2965 -0.329245,-0.294864 -0.697786,-0.533487 -1.089338,-0.722436 h 2.093413 l -0.41238,-0.521416 c -0.482785,-0.610647 -1.021543,-1.032788 -1.429369,-1.574581 -0.387358,-0.514582 -0.688422,-1.16775 -0.8847,-1.849499 0.06309,-0.05776 0.121935,-0.12092 0.178284,-0.187069 0.679915,0.197039 1.330928,0.508301 1.846916,0.89607 0.542245,0.407495 0.967081,0.945423 1.578197,1.42782 l 0.521414,0.411861 v -8.681636 l -0.521414,0.412378 c -0.612698,0.483647 -1.037598,1.029312 -1.578197,1.435571 -0.516724,0.388341 -1.171676,0.690636 -1.856219,0.886768 -0.05353,-0.06203 -0.109471,-0.121221 -0.168981,-0.1757 0.196463,-0.684033 0.497993,-1.346092 0.8847,-1.859835 0.407832,-0.541797 0.946563,-0.963429 1.429369,-1.574064 l 0.41238,-0.521415 z m -16.6672,19.885091 c 0.586546,-0.005 1.144736,0.03801 1.639693,0.140043 2.613357,0.538706 4.322378,1.396152 7.226431,2.312521 2.104496,0.664085 3.735332,0.895823 5.85184,1.015957 0.546732,0.03103 1.118235,-0.0067 1.697053,-0.07958 v 6.218743 c -0.882155,-0.303242 -1.971058,-0.744395 -3.068545,-1.149284 -1.444651,-0.532969 -2.896073,-1.011309 -4.025077,-1.011309 -2.087266,0 -4.060854,0.206904 -5.96501,1.275374 -0.907433,0.509188 -1.923627,1.407146 -2.732134,2.183331 -0.746701,0.716846 -1.213243,1.234715 -1.295011,1.324467 -0.268759,-0.0356 -2.68735,-0.337299 -4.607471,0.818036 -1.062522,0.639313 -1.974096,1.565195 -2.669088,2.412256 -0.363663,0.04196 -0.724146,0.08736 -1.07642,0.141076 -0.09798,-0.227631 -0.200335,-0.466862 -0.305408,-0.722953 -0.475844,-1.159779 -0.972446,-2.548649 -1.064534,-3.312459 -0.244477,-2.027668 -0.242104,-2.587048 0.259932,-4.445722 0.514144,-1.903574 1.236071,-3.166538 2.513542,-4.431255 1.176859,-1.165174 2.866302,-1.908148 4.611605,-2.31252 0.974698,-0.225874 2.031025,-0.36832 3.008602,-0.376722 z m 41.915786,0 c 0.977577,0.0084 2.034421,0.150847 3.00912,0.376721 1.745302,0.404372 3.432738,1.147346 4.609536,2.31252 1.277472,1.264717 2.001467,2.527681 2.515611,4.431255 0.502036,1.858674 0.503891,2.418054 0.259416,4.445722 -0.09209,0.76381 -0.588685,2.15268 -1.064536,3.312459 -0.105137,0.256247 -0.207226,0.495721 -0.305408,0.723472 -0.36105,-0.0551 -0.730422,-0.101465 -1.103291,-0.144177 -0.584219,-0.714984 -1.326433,-1.426387 -2.204517,-1.864487 -3.058342,-1.526019 -6.866535,-1.367697 -7.208863,-1.351854 -0.121577,-0.318614 -0.981748,-2.508258 -2.783293,-3.519167 -1.842275,-1.033751 -3.873479,-1.275374 -5.964494,-1.275374 -1.129001,0 -2.580941,0.478337 -4.025593,1.011309 -0.742066,0.273767 -1.478613,0.563181 -2.152322,0.816485 v -5.88646 c 0.580094,0.07315 1.153279,0.111196 1.701186,0.0801 2.116511,-0.120134 3.746828,-0.351872 5.851324,-1.015957 2.904054,-0.916369 4.613593,-1.773815 7.226948,-2.312521 0.494956,-0.102032 1.052632,-0.145087 1.639176,-0.140043 z" />}
                        </svg>
                        </div>
                        <div className="electionText">
                            <div className="province">{jdict[event.jurisdiction]}</div>
                            <div>{event.type === "leadership" ? party.fullName + " leadership election" : tdict[event.type]}</div>
                            <div className="date">{event.date.toLocaleDateString('en-CA', {year: "numeric", month: "long", day: "numeric"})}</div>
                            {event.type === "municipal" && <div className="note">{event.note}</div>}
                            {event.type === "legislative" && <div className="timing">{event.minority ? "ⓘ Or earlier (minority government)" : "ⓘ Or earlier"}</div>}
                        </div>
                    </div>
                )
            })}
        </div>
    )
}

export default Calendar